{% extends 'gcna/base.html' %} {% block content%}

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* General Styles */
    body {
      font-family: Arial, sans-serif;
      background-color: #f7f7f7; /* Adjusted background color */
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    }

    .card {
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .card-body {
      padding: 20px;
    }

    h4 {
      margin-top: 0;
      margin-bottom: 20px;
      font-size: 24px;
      color: #333;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    th,
    td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    th {
      font-weight: bold;
      color: #555;
    }

    td {
      color: #777;
    }

    button {
      cursor: pointer;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      background-color: #007bff;
      color: #fff;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #0056b3;
    }

    /* Form Styles */
    record {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #555;
    }

    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
      font-size: 16px;
      color: #333;
      outline: none;
    }

    #saveButton,
    #closeButton {
      margin-top: 10px;
      background-color: #28a745;
      border: none;
      border-radius: 5px;
      padding: 10px 20px;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    #closeButton {
      background-color: #dc3545;
      margin-left: 10px;
    }

    /* Responsive Styles */
    @media screen and (max-width: 768px) {
      .Pending_container {
        max-width: 90%;
      }
    }
  </style>
</head>
<body>
  <div class="Pending_container"></div>

  <div id="Pending_landInfoData"></div>

  <script>
    let Pending_openRequest = indexedDB.open("GCNA");
    let fieldBlacklist = [];
    const fieldBlacklistConfig = {
      DATE_OF_SAMPLING: true, // Set to true to blacklist if null or empty
      DECISION: true,
      Quantity_of_Bags: true,

      // Add more fields as needed
    };

    Pending_openRequest.onsuccess = function (event) {
      let db = event.target.result;
      let transaction = db.transaction("In-House-Drying", "readonly");
      let landInfoStore = transaction.objectStore("In-House-Drying");
      let getAllRequest = landInfoStore.getAll();

      getAllRequest.onsuccess = function (event) {
        let landInfoRecords = event.target.result;
        let Pending_landInfoDataDiv = document.getElementById(
          "Pending_landInfoData"
        );

        landInfoRecords.forEach((record) => {
          let Pending_entryContainer = document.createElement("div");
          Pending_entryContainer.id = `Pending_entryContainer_${record.id}`;
          Pending_entryContainer.innerHTML = `
              <form id="${record.entryCheck}">
                <td id="newentryCheck" >${record.entryCheck}</td>
                <td class="${record.entryCheck}" >${Pending_entryContainer.id}</td>


              <div class="card">
                        <div class="card-body">
                            <p class="card-text">
                                <table id="vertical-1" class="table table-hover table-light">
                                    <!-- <caption>First Way</caption> -->
                                    <tr>${record.id}
                                        <th>Station</th>
                                        <td>${record.STATION}</td>
                                    </tr>  
                                    <tr>
                                        <th>Date of Purchase</th>
                                        <td>${record.DATE_OF_PURCHASE}</td>
                                    </tr>                                    <tr>
                                        <th>Place of Purchase</th>
                                        <td>${record.PLACE_OF_PURCHASE}</td>
                                    </tr>
                                    <tr>
                                        <th>Number of Farmers</th>
                                        <td>${record.TOTAL_NUM_OF_FARMERS}</td>
                                    </tr>
                                    <tr>
                                        <th>Number of Bags</th>
                                        <td>${record.NUM_OF_BAGS}</td>
                                    </tr>

                                   
                                    <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

                                    <tr>
                                        <th>Total Nutmegs bought(lbs)</th>
                                        <td>${record.TOTAL_LBS_NUTMEG_BOUGHT}</td>
                                    </tr>
                                    <table class="table">
                                        <center>
                                            <label>Dates</label>   
                                        </center> 
                                        <thead>
                                            <tr>
                                                <th scope="col">Start Drying Date</th>
                                                <th scope="col">Approximate End Drying Date</th>
                                                <th scope="col">End Drying Date</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>${record.START_DRYING_DATE}</td>
                                                <td>${record.APPROX_END_DRYING_DATE}</td>
                                                <td>${record.END_DRYING_DATE}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </table>`;

          if (record.ShelfG_GF && record.TrayG_GF && record.SectionG_GF) {
            Pending_entryContainer.innerHTML += `


                        <table class="table" id="LoTableG1">
                            <center>
                                <label class="hidden-label1"> Test</label>   
                            </center> 
                            <thead>
                                <tr>
                                    <th scope="col">Shelf</th>
                                    <th scope="col">Tray</th>
                                          <th scope="col">Section</th>
      <th scope="col">Weight</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                 
                                  <td id="entryCheck" style="display: none;">${record.entryCheck}</td>


                                    <td>${record.ShelfG_GF}</td>
                                    <td>${record.TrayG_GF}</td>
                                    <td>${record.SectionG_GF}</td>
                                    <td>${record.WeightG_GF}</td>

                                </tr>
                            </tbody>


                            <div id="Pending_landInfoData1"></div>


 




                        </table>`;
          }

          if (record.ShelfG_1F && record.TrayG_1F && record.SectionG_1F) {
            Pending_entryContainer.innerHTML += `


                        <table class="table" id="LoTableG2">
                            <center>
                                <label class="hidden-label1">1st Floor</label>   
                            </center> 
                            <thead>
                                <tr>
                                    <th scope="col">Shelf</th>
                                    <th scope="col">Tray</th>
                                          <th scope="col">Section</th>
      <th scope="col">Weight</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                 
                                  <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

                                    <td>${record.ShelfG_1F}</td>
                                    <td>${record.TrayG_1F}</td>
                                    <td>${record.SectionG_1F}</td>
                                    <td>${record.WeightG_1F}</td>

                              
                                    </tr>
                            </tbody>
                            <div id="Pending_landInfoData1"></div>

                        </table>`;
          }

          if (record.ShelfG_2F && record.TrayG_2F && record.SectionG_2F) {
            Pending_entryContainer.innerHTML += `

                    <table class="table" id="LoTableG3">

                        <center>
                    <label class="hidden-label1" >2nd Floor</label>   
                    </center> 
                    <thead>
                        <tr>

                        <th scope="col">Shelf</th>
                        <th scope="col">Tray</th>
                              <th scope="col">Section</th>
      <th scope="col">Weight</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                         
                          <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

                        <td>${record.ShelfG_2F}</td>
                        <td>${record.TrayG_2F}</td>
                        <td>${record.SectionG_2F}</td>
                        <td>${record.WeightG_2F}</td>

                        </tr>


                    </tbody>
                    <div id="Pending_landInfoData1"></div>

                    </table>`;
          }

          if (record.ShelfG_FL && record.TrayG_FL && record.SectionG_FL) {
            Pending_entryContainer.innerHTML += `

<table class="table" id="LoTableG4">

    <center>
<label class="hidden-label1">Floor Loft</label>   
 </center> 
  <thead>
       <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfG_FL}</td>
      <td>${record.TrayG_FL}</td>
      <td>${record.SectionG_FL}</td>
      <td>${record.WeightG_FL}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfH_GF && record.TrayH_GF && record.SectionH_GF) {
            Pending_entryContainer.innerHTML += `

 

<table class="table" id="LoTableH1">

    <center>
<label class="hidden-label2"> Ground Floor</label>   
 </center> 
  <thead>
    <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfH_GF}</td>
      <td>${record.TrayH_GF}</td>
      <td>${record.SectionH_GF}</td>
      <td>${record.WeightH_GF}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfH_1F && record.TrayH_1F && record.SectionH_1F) {
            Pending_entryContainer.innerHTML += `


<table class="table" id="LoTableH2">

    <center>
<label class="hidden-label2">1st Floor</label>   
 </center> 
  <thead>
     <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>

      
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfH_1F}</td>
      <td>${record.TrayH_1F}</td>
      <td>${record.SectionH_1F}</td>
      <td>${record.WeightH_1F}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfH_2F && record.TrayH_2F && record.SectionH_2F) {
            Pending_entryContainer.innerHTML += `

   
<table class="table" id="LoTableH3">

    <center>
<label class="hidden-label2" >2nd Floor</label>   
 </center> 
  <thead>
      <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>

    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfH_2F}</td>
      <td>${record.TrayH_2F}</td>
      <td>${record.SectionH_2F}</td>
      <td>${record.WeightH_2F}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfH_FL && record.TrayH_FL && record.SectionH_FL) {
            Pending_entryContainer.innerHTML += `

   
<table class="table" id="LoTableH4">

    <center>
<label class="hidden-label2">Floor Loft</label>   
 </center> 
  <thead>
       <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfH_FL}</td>
      <td>${record.TrayH_FL}</td>
      <td>${record.SectionH_FL}</td>
      <td>${record.WeightH_FL}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfM_GF && record.TrayM_GF && record.SectionM_GF) {
            Pending_entryContainer.innerHTML += `


<table class="table" id="LoTableM1">

    <center>
<label class="hidden-label3"> Ground Floor</label>   
 </center> 
  <thead>
    <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfM_GF}</td>
      <td>${record.TrayM_GF}</td>
      <td>${record.SectionM_GF}</td>
      <td>${record.WeightM_GF}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfM_1F && record.TrayM_1F && record.SectionM_1F) {
            Pending_entryContainer.innerHTML += `


<table class="table" id="LoTableM2">

    <center>
<label class="hidden-label3">1st Floor</label>   
 </center> 
  <thead>
     <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfM_1F}</td>
      <td>${record.TrayM_1F}</td>
      <td>${record.SectionM_1F}</td>
      <td>${record.WeightM_1F}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfM_2F && record.TrayM_2F && record.SectionM_2F) {
            Pending_entryContainer.innerHTML += `


<table class="table" id="LoTableM3">

    <center>
<label class="hidden-label3">2nd Floor</label>   
 </center> 
  <thead>
      <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfM_2F}</td>
      <td>${record.TrayM_2F}</td>
      <td>${record.SectionM_2F}</td>
      <td>${record.WeightM_2F}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfM_FL && record.TrayM_FL && record.SectionM_FL) {
            Pending_entryContainer.innerHTML += `



<table class="table" id="LoTableM4">

    <center>
<label class="hidden-label3">Floor Loft</label>   
 </center> 
  <thead>
       <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfM_FL}</td>
      <td>${record.TrayM_FL}</td>
      <td>${record.SectionM_FL}</td>
      <td>${record.WeightM_FL}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfU_GF && record.TrayU_GF && record.SectionU_GF) {
            Pending_entryContainer.innerHTML += `


<table class="table" id="LoTableU1">

    <center>
<label class="hidden-label4"> Ground Floor</label>   
 </center> 
  <thead>
    <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfU_GF}</td>
      <td>${record.TrayU_GF}</td>
      <td>${record.SectionU_GF}</td>
      <td>${record.WeightU_GF}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfU_1F && record.TrayU_1F && record.SectionU_1F) {
            Pending_entryContainer.innerHTML += `


<table class="table" id="LoTableU2">

    <center>
<label class="hidden-label4">1st Floor</label>   
 </center> 
  <thead>
     <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfU_1F}</td>
      <td>${record.TrayU_1F}</td>
      <td>${record.SectionU_1F}</td>
      <td>${record.WeightU_1F}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfU_2F && record.TrayU_2F && record.SectionU_2F) {
            Pending_entryContainer.innerHTML += `

<table class="table" id="LoTableU3">

    <center>
<label class="hidden-label4">2nd Floor</label>   
 </center> 
  <thead>
      <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfU_2F}</td>
      <td>${record.TrayU_2F}</td>
      <td>${record.SectionU_2F}</td>
      <td>${record.WeightU_2F}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfU_FL && record.TrayU_FL && record.SectionU_FL) {
            Pending_entryContainer.innerHTML += `

   
<table class="table" id="LoTableU4">

    <center>
<label class="hidden-label4">Floor Loft</label>   
 </center> 
  <thead>
       <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfU_FL}</td>
      <td>${record.TrayU_FL}</td>
      <td>${record.SectionU_FL}</td>
      <td>${record.WeightU_FL}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfGP_GF && record.TrayGP_GF && record.SectionGP_GF) {
            Pending_entryContainer.innerHTML += `

<table class="table" id="LoTableGP1">

    <center>
<label class="hidden-label5"> Ground Floor</label>   
 </center> 
  <thead>
    <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfGP_GF}</td>
      <td>${record.TrayGP_GF}</td>
      <td>${record.SectionGP_GF}</td>
      <td>${record.WeightGP_GF}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfGP_1F && record.TrayGP_1F && record.SectionGP_1F) {
            Pending_entryContainer.innerHTML += `


<table class="table" id="LoTableGP2">

    <center>
<label class="hidden-label5">1st Floor</label>   
 </center> 
  <thead>
     <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfGP_1F}</td>
      <td>${record.TrayGP_1F}</td>
      <td>${record.SectionGP_1F}</td>
      <td>${record.WeightGP_1F}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfGP_2F && record.TrayGP_2F && record.SectionGP_2F) {
            Pending_entryContainer.innerHTML += `

   
<table class="table" id="LoTableGP3">

    <center>
<label class="hidden-label5">2nd Floor</label>   
 </center> 
  <thead>
      <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfGP_2F}</td>
      <td>${record.TrayGP_2F}</td>
      <td>${record.SectionGP_2F}</td>
      <td>${record.WeightGP_2F}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfGP_FL && record.TrayGP_FL && record.SectionGP_FL) {
            Pending_entryContainer.innerHTML += `

   
<table class="table" id="LoTableGP4">

    <center>
<label class="hidden-label5">Floor Loft</label>   
 </center> 
  <thead>
       <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfGP_FL}</td>
      <td>${record.TrayGP_FL}</td>
      <td>${record.SectionGP_FL}</td>
      <td>${record.WeightGP_FL}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }
          Pending_entryContainer.innerHTML += `


<br>  
<br>  
<br>  
<br>  
<br>  
<br>  




                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           












 
 <tr>

         <center>
            <p>MOISTURE TESTING (Weeks 3, 6, 8)</p>
</center>
        </tr>


        <tr>

         <center>
   
            <p>LOCATION2</p>
</center>`;

          if (record.ShelfG_0_GF && record.TrayG_0_GF && record.SectionG_0_GF) {
            Pending_entryContainer.innerHTML += `


<table class="table" id="LoTableG10">

    <center>
<label class="hidden-label1"> Ground Floor</label>   
 </center> 
  <thead>
    <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfG_0_GF}</td>
      <td>${record.TrayG_0_GF}</td>
      <td>${record.SectionG_0_GF}</td>
      <td>${record.MoistureG_GF}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfG_0_1F && record.TrayG_0_1F && record.SectionG_0_1F) {
            Pending_entryContainer.innerHTML += `

<table class="table" id="LoTableG20">

    <center>
<label class="hidden-label1">1st Floor</label>   
 </center> 
  <thead>
     <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfG_0_1F}</td>
      <td>${record.TrayG_0_1F}</td>
      <td>${record.SectionG_0_1F}</td>
      <td>${record.MoistureG_1F}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfG_0_2F && record.TrayG_0_2F && record.SectionG_0_2F) {
            Pending_entryContainer.innerHTML += `

    <table class="table" id="LoTableG30">

    <center>
<label class="hidden-label1" >2nd Floor</label>   
 </center> 
  <thead>
      <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfG_0_2F}</td>
      <td>${record.TrayG_0_2F}</td>
      <td>${record.SectionG_0_2F}</td>
      <td>${record.MoistureG_2F}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfG_0_FL && record.TrayG_0_FL && record.SectionG_0_FL) {
            Pending_entryContainer.innerHTML += `

    <table class="table" id="LoTableG40">

    <center>
<label class="hidden-label1">Floor Loft</label>   
 </center> 
  <thead>
       <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfG_0_FL}</td>
      <td>${record.TrayG_0_FL}</td>
      <td>${record.SectionG_0_FL}</td>
      <td>${record.MoistureG_FL}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfH_0_GF && record.TrayH_0_GF && record.SectionH_0_GF) {
            Pending_entryContainer.innerHTML += `
 


<table class="table" id="LoTableH10">

    <center>
<label class="hidden-label2"> Ground Floor</label>   
 </center> 
  <thead>
    <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfH_0_GF}</td>
      <td>${record.TrayH_0_GF}</td>
      <td>${record.SectionH_0_GF}</td>
      <td>${record.MoistureH_GF}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfH_0_1F && record.TrayH_0_1F && record.SectionH_0_1F) {
            Pending_entryContainer.innerHTML += `

<table class="table" id="LoTableH20">

    <center>
<label class="hidden-label2">1st Floor</label>   
 </center> 
  <thead>
     <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfH_0_1F}</td>
      <td>${record.TrayH_0_1F}</td>
      <td>${record.SectionH_0_1F}</td>
      <td>${record.MoistureH_1F}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfH_0_2F && record.TrayH_0_2F && record.SectionH_0_2F) {
            Pending_entryContainer.innerHTML += `

    <table class="table" id="LoTableH30">

    <center>
<label class="hidden-label2" >2nd Floor</label>   
 </center> 
  <thead>
      <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfH_0_2F}</td>
      <td>${record.TrayH_0_2F}</td>
      <td>${record.SectionH_0_2F}</td>
      <td>${record.MoistureH_2F}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfH_0_FL && record.TrayH_0_FL && record.SectionH_0_FL) {
            Pending_entryContainer.innerHTML += `

    <table class="table" id="LoTableH40">

    <center>
<label class="hidden-label2">Floor Loft</label>   
 </center> 
  <thead>
       <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfH_0_FL}</td>
      <td>${record.TrayH_0_FL}</td>
      <td>${record.SectionH_0_FL}</td>
      <td>${record.MoistureH_FL}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfM_0_GF && record.TrayM_0_GF && record.SectionM_0_GF) {
            Pending_entryContainer.innerHTML += `

<table class="table" id="LoTableM10">

    <center>
<label class="hidden-label3"> Ground Floor</label>   
 </center> 
  <thead>
    <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfM_0_GF}</td>
      <td>${record.TrayM_0_GF}</td>
      <td>${record.SectionM_0_GF}</td>
      <td>${record.MoistureM_GF}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfM_0_1F && record.TrayM_0_1F && record.SectionM_0_1F) {
            Pending_entryContainer.innerHTML += `

<table class="table" id="LoTableM20">

    <center>
<label class="hidden-label3">1st Floor</label>   
 </center> 
  <thead>
     <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfM_0_1F}</td>
      <td>${record.TrayM_0_1F}</td>
      <td>${record.SectionM_0_1F}</td>
      <td>${record.MoistureM_1F}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfM_0_2F && record.TrayM_0_2F && record.SectionM_0_2F) {
            Pending_entryContainer.innerHTML += `



<table class="table" id="LoTableM30">

    <center>
<label class="hidden-label3">2nd Floor</label>   
 </center> 
  <thead>
      <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfM_0_2F}</td>
      <td>${record.TrayM_0_2F}</td>
      <td>${record.SectionM_0_2F}</td>
      <td>${record.MoistureM_2F}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfM_0_FL && record.TrayM_0_FL && record.SectionM_0_FL) {
            Pending_entryContainer.innerHTML += `

<table class="table" id="LoTableM40">

    <center>
<label class="hidden-label3">Floor Loft</label>   
 </center> 
  <thead>
       <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfM_0_FL}</td>
      <td>${record.TrayM_0_FL}</td>
      <td>${record.SectionM_0_FL}</td>
      <td>${record.MoistureM_FL}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfU_0_GF && record.TrayU_0_GF && record.SectionU_0_GF) {
            Pending_entryContainer.innerHTML += `


<table class="table" id="LoTableU10">

    <center>
<label class="hidden-label4"> Ground Floor</label>   
 </center> 
  <thead>
    <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfU_0_GF}</td>
      <td>${record.TrayU_0_GF}</td>
      <td>${record.SectionU_0_GF}</td>
      <td>${record.MoistureU_GF}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfU_0_1F && record.TrayU_0_1F && record.SectionU_0_1F) {
            Pending_entryContainer.innerHTML += `

<table class="table" id="LoTableU20">

    <center>
<label class="hidden-label4">1st Floor</label>   
 </center> 
  <thead>
     <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfU_0_1F}</td>
      <td>${record.TrayU_0_1F} }</td>
      <td>${record.SectionU_0_1F}</td>
      <td>${record.MoistureU_1F}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfU_0_2F && record.TrayU_0_2F && record.SectionU_0_2F) {
            Pending_entryContainer.innerHTML += `
   
<table class="table" id="LoTableU30">

    <center>
<label class="hidden-label4">2nd Floor</label>   
 </center> 
  <thead>
      <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfU_0_2F}</td>
      <td>${record.TrayU_0_2F}</td>
      <td>${record.SectionU_0_2F}</td>
      <td>${record.MoistureU_2F}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (record.ShelfU_0_FL && record.TrayU_0_FL && record.SectionU_0_FL) {
            Pending_entryContainer.innerHTML += `

   
<table class="table" id="LoTableU40">

    <center>
<label class="hidden-label4">Floor Loft</label>   
 </center> 
  <thead>
       <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfU_0_FL}</td>
      <td>${record.TrayU_0_FL}</td>
      <td>${record.SectionU_0_FL}</td>
      <td>${record.MoistureU_FL}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (
            record.ShelfGP_0_GF &&
            record.TrayGP_0_GF &&
            record.SectionGP_0_GF
          ) {
            Pending_entryContainer.innerHTML += `

<table class="table" id="LoTableGP10">

    <center>
<label class="hidden-label5"> Ground Floor</label>   
 </center> 
  <thead>
    <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfGP_0_GF}</td>
      <td>${record.TrayGP_0_GF}</td>
      <td>${record.SectionGP_0_GF}</td>
      <td>${record.MoistureGP_GF}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (
            record.ShelfGP_0_1F &&
            record.TrayGP_0_1F &&
            record.SectionGP_0_1F
          ) {
            Pending_entryContainer.innerHTML += `


<table class="table" id="LoTableGP20">

    <center>
<label class="hidden-label5">1st Floor</label>   
 </center> 
  <thead>
     <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfGP_0_1F}</td>
      <td>${record.TrayGP_0_1F}</td>
      <td>${record.SectionGP_0_1F}</td>
      <td>${record.MoistureGP_1F}</td>

    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (
            record.ShelfGP_0_2F &&
            record.TrayGP_0_2F &&
            record.SectionGP_0_2F
          ) {
            Pending_entryContainer.innerHTML += `
   
<table class="table" id="LoTableGP30">

    <center>
<label class="hidden-label5">2nd Floor</label>   
 </center> 
  <thead>
      <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfGP_0_2F}</td>
      <td>${record.TrayGP_0_2F}</td>
      <td>${record.SectionGP_0_2F}</td>
      <td>${record.MoistureGP_2F}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          if (
            record.ShelfGP_0_FL &&
            record.TrayGP_0_FL &&
            record.SectionGP_0_FL
          ) {
            Pending_entryContainer.innerHTML += `

   
<table class="table" id="LoTableGP40">

    <center>
<label class="hidden-label5">Floor Loft</label>   
 </center> 
  <thead>
       <tr>

       <th scope="col">Shelf</th>
      <th scope="col">Tray</th>
            <th scope="col">Section</th>
      <th scope="col">Moisture</th>
    </tr>
  </thead>
  <tbody>
    <tr>
     
      <td id="entryCheck" style="display: none;">${record.entryCheck}</td>

       <td>${record.ShelfGP_0_FL}</td>
      <td>${record.TrayGP_0_FL}</td>
      <td>${record.SectionGP_0_FL}</td>
      <td>${record.MoistureGP_FL}</td>

    </tr>


  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>`;
          }

          Pending_entryContainer.innerHTML += `

<br>  
<br>  
<br>  
<br>  
<br>  
<br>  







<tr>

         <center>

</center>
        </tr>



<table class="table" >

    <center>
<label class="hidden-label5">MONITORING AND INSPECTION</label>   
 </center> 
  <thead>
    <tr>
      <th scope="col">Station</th>
      <th scope="col">Location</th>
      <th scope="col">Defect</th>
      <th scope="col">Predominant Defect</th>
     </tr>
  </thead>
  <tbody>
    <tr>
      <td>${record.STATION2}</td>
      <td>${record.LOCATION3}</td>
      <td>${record.DEFECT}</td>
      <td>${record.PREDOMINANT_DEFECT}</td>
 
    </tr>

  </tbody>
  <div id="Pending_landInfoData1"></div>

</table>

<table>
  <div style="display: none;">

<td id="newentryCheck" style="display: none;">${record.entryCheck}</td>
</div>
<div id="Pending_landInfoData2"></div>




</table>

<table>

<td id="newentryCheck1" style="display: none;">${record.entryCheck}</td>

<div id="Pending_landInfoData3"></div>



</table>





























<table class="table">

    <center>
 </center> 
  <thead>

  </thead>
  <tbody>
    <tr>


       <td>ALERT</td>
      <td>${record.ALERT}</td>

    </tr>

  </tbody>
</table>





         <table id="vertical-1" class="table table-hover table-light">



        <tr>
            <th>Sampling from Gouyvae</th>
            <td>${record.Sampling_from_gouyvae}</td>
        </tr>


<br>


        <tr>
            <th>Control Number</th>
            <td>${record.Control_number}</td>
        </tr>
</table>




















                
                // Add other if statements similarly for other conditions


            </div>
               </div>
               <br> <br> <br>
               </form>
           `;
          Pending_landInfoDataDiv.appendChild(Pending_entryContainer);
        });
      };
    };
  </script>
  <script>
    let Pending_openRequest2 = indexedDB.open("GCNA");

    Pending_openRequest2.onsuccess = function (event) {
      let db = event.target.result;
      let transaction = db.transaction("Shelves", "readonly");
      let landInfoStore = transaction.objectStore("Shelves");
      let getAllRequest = landInfoStore.getAll();

      getAllRequest.onsuccess = function (event) {
        let landInfoRecords = event.target.result;
        let tables = document.querySelectorAll(".table"); // Select all tables

        // Inside the loop where you iterate over landInfoRecords
        landInfoRecords.forEach((record) => {
          tables.forEach((table) => {
            let floor = record.floor; // Get the floor entry from the record
            let tableId = table.id; // Get the ID of the table

            if (floor === tableId) {
              // Check if the floor entry matches the table ID
              let entryCheckTd = table.querySelector("td#entryCheck");
              if (entryCheckTd.textContent.trim() === record.entry) {
                // Check if the td with id "entryCheck" exists in the current table
                let Pending_landInfoDataDiv = table.querySelector(
                  ".Pending_landInfoData1"
                );
                if (!Pending_landInfoDataDiv) {
                  // Check if the div exists, if not, create it
                  Pending_landInfoDataDiv = document.createElement("div");
                  Pending_landInfoDataDiv.className = "Pending_landInfoData1";
                  table.appendChild(Pending_landInfoDataDiv);
                }

                let Pending_entryContainer = document.createElement("div");
                Pending_entryContainer.className = "entry-container";
                Pending_entryContainer.dataset.formId = table.id; // Unique identifier for the Pending_entryContainer
                // Unique identifier for the Pending_entryContainer
                Pending_entryContainer.innerHTML = `
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title"></h5>
                        <p class="card-text">
                            <center>
                                <table>
                                    <thead>
                                        <tr>
                                            <th scope="col">Shelf</th>
                                            <th scope="col">Tray</th>
                                                  <th scope="col">Section</th>
      <th scope="col">Num of Bags</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                            <td>${record.Shelf}</td>
                                            <td>${record.Tray}</td>
                                            <td>${record.Section}</td>
                                            <td>${record.amount}</td>

                                            
                                        </tr>
                                    </tbody>


                                </table>

                                                                    <div style="display: none;">
                                           <td>${record.station}</td>
                                            <td>${record.floor}</td>
                                            <td>${record.entry}</td>
                                      </div>
                            </center>
                        </p>
                    </div>
                </div>
                <br> <br> <br>`;
                Pending_landInfoDataDiv.appendChild(Pending_entryContainer);
              } else {
                console.log(
                  "No TD with ID 'entryCheck' found or its content does not match in table with ID:"
                );
              }
            }
          });
        });
      };
    };
  </script>
  <!-- 
<th scope="col">Shelf:</th>
<th scope="col">Tray:</th>
<th scope="col">Section:</th>
<th scope="col">Moisture</th>
<th scope="col">Week</th>
<th scope="col"></th>
</tr>
</thead>
<tbody>
<tr>
<td><input type="text" id="M_Shelf" class="form-control" name="M_Shelf" value="${shelfValue}" required></td>
<td><input type="text" id="M_Tray" class="form-control" name="M_Tray" value="${trayValue}" required></td>
<td><input type="text" id="M_Section" class="form-control" name="M_Section" value="${sectionValue}" required></td>
<td><input type="text" id="Moisture" class="form-control" name="Moisture" required></td>
<td><input type="text" id="Week" class="form-control" name="Week" required></td>
 -->

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      let Pending_openRequest3 = indexedDB.open("GCNA");

      Pending_openRequest3.onsuccess = function (event) {
        let db = event.target.result;
        let transaction = db.transaction("M_Shelves", "readwrite");
        let landInfoStore = transaction.objectStore("M_Shelves");
        let getAllRequest = landInfoStore.getAll();

        getAllRequest.onsuccess = function (event) {
          let landInfoRecords = event.target.result;
          let tables = document.querySelectorAll("table");

          tables.forEach((table) => {
            landInfoRecords.forEach((record) => {
              let entryCheckTd = table.querySelector("td#newentryCheck");

              if (
                entryCheckTd &&
                entryCheckTd.textContent.trim() === record.entry
              ) {
                console.log(
                  "Roar the SPAAAAARk X2" + entryCheckTd.textContent.trim
                );
                let Pending_landInfoDataDiv = table.querySelector(
                  ".Pending_landInfoData2"
                );
                if (!Pending_landInfoDataDiv) {
                  Pending_landInfoDataDiv = document.createElement("div");
                  Pending_landInfoDataDiv.className = "Pending_landInfoData2";
                  table.appendChild(Pending_landInfoDataDiv);
                }

                let Pending_entryContainer = document.createElement("div");
                Pending_entryContainer.className = "entry-container";
                Pending_entryContainer.dataset.formId = record.entry;

                shelfValue = record.M_Shelf;
                trayValue = record.M_Tray;
                sectionValue = record.M_Section;
                labelText = record.labelText;
                tableId = record.floor;
                entry = record.entry;
                station = record.station;

                Pending_entryContainer.innerHTML = `
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title"></h5>
                  <p class="card-text">
                    <center>
                      <table>
                        <thead>
                          <label>${record.labelText}(Moisture)</label>
                          <tr>
                            <th scope="col">Station</th>
                            <th scope="col">Shelf</th>
                            <th scope="col">Tray</th>
                            <th scope="col">Section</th>
                            <th scope="col">Moisture</th>
                            <th scope="col">Week</th>
                            <th scope="col">Date Created</th>
                            <th scope="col">Batch Code</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>${record.station}</td>
                            <td>${record.M_Shelf}</td>
                            <td>${record.M_Tray}</td>
                            <td>${record.M_Section}</td>
                            <td>${record.Date}</td>
                            <td>${record.Batchcode}</td>
                            <td><input type="text" class="form-control" name="Moisture" id="Moisture" value="${record.Moisture}"></td>
                            <td><input type="text" class="form-control" name="Week" id="Week" value="${record.Week}"></td>
                            <td><button type="button" class="add-row" onclick="weeklyForm('${tableId}', 'myForm', this.parentNode.parentNode, '${shelfValue}', '${trayValue}', '${sectionValue}', '${labelText}','${entry}','${station}')">[+]</button></td>
                           </tr>
                        </tbody>
                        <div style="display: none;">
                          <td>${record.floor}</td>
                          <td>${record.id}</td>
                          <td>${record.entry}</td>
                        </div>.
                      </table>
                    </center>
                  </p>
                </div>
              </div>
              <br> <br> <br>`;

                // Append entry container to the Pending_landInfoDataDiv
                Pending_landInfoDataDiv.appendChild(Pending_entryContainer);

                // Create submit button
                var submitButton = document.createElement("button");
                submitButton.type = "button";
                submitButton.textContent = "Submit";

                // Pass the entry ID (record.entry) to the function
                submitButton.addEventListener("click", function () {
                  // Get the updated values from the input fields
                  let moistureInput = Pending_entryContainer.querySelector(
                    'input[name="Moisture"]'
                  );

                  let weekInput =
                    Pending_entryContainer.querySelector('input[name="Week"]');

                  let updatedMoisture = moistureInput.value;
                  let updatedWeek = weekInput.value;
                  submitAndUpdateIndexedDB(
                    record.entry,
                    record.Moisture,
                    record.Week,
                    record.id,
                    updatedMoisture,
                    updatedWeek
                  );
                });

                if (record.Moisture > 7) {
                  console.log("Generate");
                }

                if (record.Moisture < 7) {
                  console.log("Don't Generate");
                }

                // Append submit button to the entry container
                Pending_entryContainer.appendChild(submitButton);
              }
            });
          });

          landInfoRecords.forEach((record) => {
            let form = document.getElementById(record.entry);
            let test = document.getElementsByClassName(record.entry);

            if (form) {
              if (test) {
                console.log(test);
              }
              console.log(`Checking form with ID: ${record.entry}`);
              if (record.Moisture <= 7) {
                form.style.display = "none";
                console.log(
                  z`Hiding form with ID: ${record.entry} due to moisture level: ${record.Moisture}`
                );
              }
            }
          });
        };
      };
    });
  </script>

  <!-- <script>
    document.addEventListener("DOMContentLoaded", function () {
      let Pending_openRequest3 = indexedDB.open("GCNA");

      Pending_openRequest3.onsuccess = function (event) {
        let db = event.target.result;
        let transaction = db.transaction("M_Shelves", "readwrite"); // Changed to readwrite
        let landInfoStore = transaction.objectStore("M_Shelves");
        let getAllRequest = landInfoStore.getAll();

        getAllRequest.onsuccess = function (event) {
          let landInfoRecords = event.target.result;
          let tables = document.querySelectorAll("table");

          tables.forEach((table) => {
            landInfoRecords.forEach((record) => {
              let entryCheckTd = table.querySelector("td#newentryCheck");

              if (
                entryCheckTd &&
                entryCheckTd.textContent.trim() === record.entry
              ) {
                console.log(
                  "Roar the SPAAAAARk X2" + entryCheckTd.textContent.trim
                );
                let Pending_landInfoDataDiv = table.querySelector(
                  ".Pending_landInfoData2"
                );
                if (!Pending_landInfoDataDiv) {
                  Pending_landInfoDataDiv = document.createElement("div");
                  Pending_landInfoDataDiv.className = "Pending_landInfoData2";
                  table.appendChild(Pending_landInfoDataDiv);
                }

                let Pending_entryContainer = document.createElement("div");
                Pending_entryContainer.className = "entry-container";
                Pending_entryContainer.dataset.formId = record.entry;

                shelfValue = record.M_Shelf;
                trayValue = record.M_Tray;
                sectionValue = record.M_Section;
                labelText = record.labelText;
                tableId = record.floor;
                entry = record.entry;
                station = record.station;

                Pending_entryContainer.innerHTML = `
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title"></h5>
                    <p class="card-text">
                      <center>
                        <table>
                          <thead>
                            <label>${record.labelText}(Moisture)</label>
                            <tr>
                              <th scope="col">Station</th>
                              <th scope="col">Shelf</th>
                              <th scope="col">Tray</th>
                              <th scope="col">Section</th>
                              <th scope="col">Moisture</th>
                              <th scope="col">Week</th>
                              <th scope="col">Date Created</th>
                              <th scope="col">Batch Code</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>${record.station}</td>
                              <td>${record.M_Shelf}</td>
                              <td>${record.M_Tray}</td>
                              <td>${record.M_Section}</td>
                              <td>${record.Date}</td>
                              <td>${record.Batchcode}</td>

                              <td><input type="text" class="form-control" name="Moisture" id="Moisture" value="${record.Moisture}"></td>
                              <td><input type="text" class="form-control" name="Week" id="Week" value="${record.Week}"></td>
                              <td><button type="button" class="add-row" onclick="weeklyForm('${tableId}', 'myForm', this.parentNode.parentNode, '${shelfValue}', '${trayValue}', '${sectionValue}', '${labelText}','${entry}','${station}')">[+]</button></td>

                            </tr>
                          </tbody>
                          <div style="display: none;">
                            <td>${record.floor}</td>
                            <td>${record.id}</td>
                            <td>${record.entry}</td>
                          </div>
                        </table>
                      </center>
                    </p>
                  </div>
                </div>
                <br> <br> <br>`;

                // Append entry container to the Pending_landInfoDataDiv
                Pending_landInfoDataDiv.appendChild(Pending_entryContainer);

                // Create submit button
                var submitButton = document.createElement("button");
                submitButton.type = "button";
                submitButton.textContent = "Submit";

                // Pass the entry ID (record.entry) to the function
                submitButton.addEventListener("click", function () {
                  // Get the updated values from the input fields
                  let moistureInput = Pending_entryContainer.querySelector(
                    'input[name="Moisture"]'
                  );

                  let weekInput =
                    Pending_entryContainer.querySelector('input[name="Week"]');

                  let updatedMoisture = moistureInput.value;
                  let updatedWeek = weekInput.value;
                  submitAndUpdateIndexedDB(
                    record.entry,
                    record.Moisture,
                    record.Week,
                    record.id,
                    updatedMoisture,
                    updatedWeek
                  );
                });
                if (record.Moisture > 7) {
                  console.log("Generate");
                }

                if (record.Moisture < 7) {
                  console.log("Don't Generate");
                }

                // Append submit button to the entry container
                Pending_entryContainer.appendChild(submitButton);
              }
            });
          });

          let forms = document.querySelectorAll("form");

          forms.forEach((form) => {
            landInfoRecords.forEach((record) => {
              let entryCheckTd1 = form.querySelector("td#newentryCheck");
              console.log(entryCheckTd1);

              if (
                entryCheckTd1 &&
                entryCheckTd1.textContent.trim() === record.entry
              ) {
                console.log("This works");

                // Check moisture level and hide the form if necessary
                if (record.Moisture <= 7) {
                  form.style.display = "none";
                }
              }
            });
          });
        };
      };
    });
  </script> -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      let Pending_openRequest4 = indexedDB.open("GCNA");

      Pending_openRequest4.onsuccess = function (event) {
        let db = event.target.result;
        let transaction = db.transaction("W_Shelves", "readwrite"); // Changed to readwrite
        let landInfoStore = transaction.objectStore("W_Shelves");
        let getAllRequest = landInfoStore.getAll();

        getAllRequest.onsuccess = function (event) {
          let landInfoRecords = event.target.result;
          let tables = document.querySelectorAll("table");

          tables.forEach((table) => {
            landInfoRecords.forEach((record) => {
              let entryCheckTd = table.querySelector("td#newentryCheck1");
              if (
                entryCheckTd &&
                entryCheckTd.textContent.trim() === record.entry
              ) {
                console.log(
                  "READY OOOOOOORRRRR" + entryCheckTd.textContent.trim
                );
                let Pending_landInfoDataDiv1 = table.querySelector(
                  ".Pending_landInfoData3"
                );
                if (!Pending_landInfoDataDiv1) {
                  Pending_landInfoDataDiv1 = document.createElement("div");
                  Pending_landInfoDataDiv1.className = "Pending_landInfoData3";
                  table.appendChild(Pending_landInfoDataDiv1);
                }

                // let Pending_entryContainer = document.createElement("div");
                // Pending_entryContainer.className = "entry-container";
                // Pending_entryContainer.dataset.formId = table.id;
                let Pending_entryContainer1 = document.createElement("div");
                Pending_entryContainer1.className = "entry-container";
                Pending_entryContainer1.dataset.formId = record.entry;
                shelfValue = record.W_Shelf;
                trayValue = record.W_Tray;
                sectionValue = record.W_Section;
                labelText = record.labelText;
                tableId = record.floor;
                entry = record.entry;
                station = record.station;
                Pending_entryContainer1.innerHTML = `
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title"></h5>
                    <p class="card-text">
                      <center>
                        <table>
                          <thead>
                            <label>${record.labelText}(Weekly)</label>
                            <tr>
                              <th scope="col">Station</th>
                              <th scope="col">Shelf</th>
                              <th scope="col">Tray</th>
                              <th scope="col">Section</th>
                              <th scope="col">Moisture</th>
                              <th scope="col">Week</th>
                              <th scope="col">Date Created</th>
                              <th scope="col">Batch Code</th>

                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>${record.station}</td>
                              <td>${record.W_Shelf}</td>
                              <td>${record.W_Tray}</td>
                              <td>${record.W_Section}</td>                 
                              <td>${record.Date}</td>
                              <td>${record.Batchcode}</td>
                              <td><input type="text" class="form-control" name="Moisture" id="Moisture" value="${record.Moisture}"></td>
                              <td><input type="text" class="form-control" name="Week" id="Week" value="${record.Week}"></td>
                              <td><button type="button" class="add-row" onclick="weeklyForm('${tableId}', 'myForm', this.parentNode.parentNode, '${shelfValue}', '${trayValue}', '${sectionValue}', '${labelText}','${entry}','${station}')">[+]</button></td>

                            </tr>
                          </tbody>
                          <div style="display: none;">
                            <td>${record.floor}</td>
                            <td>${record.id}</td>
                            <td>${record.entry}</td>
                          </div>
                        </table>
                      </center>
                    </p>
                  </div>
                </div>
                <br> <br> <br>`;
                Pending_landInfoDataDiv1.appendChild(Pending_entryContainer1);

                // Create submit button
                var submitButton = document.createElement("button");
                submitButton.type = "button";
                submitButton.textContent = "Submit";
                // Pass the entry ID (record.entry) to the function
                submitButton.addEventListener("click", function () {
                  submitAndUpdateIndexedDB(
                    record.entry,
                    record.Moisture,
                    record.Week
                  );
                });

                Pending_entryContainer1.appendChild(submitButton);
              }
            });
          });
        };
      };
    });
  </script>
  <script>
    function submitAndUpdateIndexedDB(
      entryId,
      moistureValue,
      weekValue,
      IDcheck,
      updatedMoisture,
      updatedWeek
    ) {
      let Pending_openRequest = indexedDB.open("GCNA");

      Pending_openRequest.onsuccess = function (event) {
        let db = event.target.result;
        let transaction = db.transaction("M_Shelves", "readwrite");
        let landInfoStore = transaction.objectStore("M_Shelves");

        // Get the record from the object store
        let getRequest = landInfoStore.get(IDcheck);

        getRequest.onsuccess = function (event) {
          let record = event.target.result;

          if (record) {
            // Update the record if it exists
            record.Moisture = updatedMoisture;
            record.Week = updatedWeek;

            // Put the updated record back into the object store
            let putRequest = landInfoStore.put(record);

            putRequest.onsuccess = function (event) {
              console.log("Record updated successfully");
            };

            putRequest.onerror = function (event) {
              console.error("Error updating record: ", event.target.error);
            };
          } else {
            console.error(`Record with entryId ${entryId} not found`);
            // You can choose to handle this situation according to your application's logic
            // For example, you can create a new record with default values, or display an error message to the user
          }
        };

        getRequest.onerror = function (event) {
          console.error("Error getting record: ", event.target.error);
        };
      };

      Pending_openRequest.onerror = function (event) {
        console.error("Error opening database: ", event.target.error);
      };
    }
  </script>

  <script>
    function Pending_transferIndexedDBData() {
      // Open a transaction to read the updated data from IndexedDB
      var request = indexedDB.open("GCNA", 2);
      request.onsuccess = function (event) {
        var db = event.target.result;
        var transaction = db.transaction(
          ["M_Shelves", "W_Shelves"],
          "readonly"
        );

        // Retrieve the object stores
        var mShelvesStore = transaction.objectStore("M_Shelves");
        var wShelvesStore = transaction.objectStore("W_Shelves");

        // Fetch the updated data
        var mShelvesRequest = mShelvesStore.getAll();
        var wShelvesRequest = wShelvesStore.getAll();

        // Handle the data transfer
        transaction.oncomplete = function () {
          var mShelvesData = mShelvesRequest.result;
          var wShelvesData = wShelvesRequest.result;

          // Example: Log the updated data to the console
          console.log("Updated M_Shelves data:", mShelvesData);
          console.log("Updated W_Shelves data:", wShelvesData);

          // You can perform further operations with the updated data here
        };

        transaction.onerror = function (event) {
          console.error("Error reading data from IndexedDB:", event);
        };
      };

      request.onerror = function (event) {
        console.error("Error opening IndexedDB:", event);
      };
    }
  </script>

  <script>
    var formCount = 0;

    function addForm(tableId, mainFormId, clickedRow) {
      formCount++;
      var form = document.createElement("form");
      form.id = `form_${formCount}`;
      form.innerHTML = `
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Shelf:</th>
                    <th scope="col">Tray:</th>
                    <th scope="col">Section:</th>
                    <th scope="col">Amount/lbs</th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input type="text" id="Shelf" class="form-control" name="Shelf" required></td>
                    <td><input type="text" id="Tray" class="form-control" name="Tray" required></td>
                    <td><input type="text" id="Section" class="form-control" name="Section" required></td>
                    <td><input type="text" id="amount" class="form-control" name="amount" required onblur="checkAmountAndTrigger(this.parentNode.parentNode, document.getElementById('Shelf').value, document.getElementById('Tray').value, document.getElementById('Section').value)"></td>
                    <td><button type="button" onclick="submitForm('${tableId}', '${mainFormId}', ${formCount})">✔</button></td>
                    <td><button type="button" onclick="Pending_removeForm('form_${formCount}')">Close</button></td>
                    <td><button type="button" class="add-row" onclick="Pending_moistureForm('Test', 'myForm', this.parentNode.parentNode, 'ShelfG_1F', 'TrayG_1F', 'SectionG_1F', '1st Floor')">[+]</button></td>
                </tr>
            </tbody>
        </table>
        <div style="display: none;">
            <input type="number" id="entry" name="entry" required>
            <input type="text" id="floor" name="floor" required>
            <input type="hidden" id="station" name="station" required>
        </div>
    `;
      var tbody = clickedRow.parentNode;
      var newRow = tbody.insertRow(clickedRow.rowIndex + 1);
      var newCell = newRow.insertCell(0);
      newCell.appendChild(form);
    }

    function checkAmountAndTrigger(row, shelfValue, trayValue, sectionValue) {
      console.log("Checking amount and triggering function...");
      var triggerFlag = false;

      var amountInput = row.querySelector("#amount");
      if (amountInput.value) {
        if (!triggerFlag) {
          shelf_moistureForm(
            "Test",
            "myForm",
            row,
            shelfValue,
            trayValue,
            sectionValue,
            "1st Floor"
          );
          console.log("Function triggered successfully.");
          triggerFlag = true;
        } else {
          console.log("Function already triggered.");
        }
      } else {
        console.log("Amount field is empty.");
      }
    }
    // weeklyForm('${tableId}', 'myForm', this.parentNode.parentNode, '${shelfValue}', '${trayValue}', '${sectionValue}', '${labelText}','${entry}
    function weeklyForm(
      tableId,
      mainFormId,
      clickedRow,
      shelfValue,
      trayValue,
      sectionValue,
      labelText,
      entry,
      station
    ) {
      formCount++;
      // var shelfValue = document.getElementById('id_'+shelfName).value;
      // var trayValue = document.getElementById('id_'+trayName).value;
      // var sectionValue = document.getElementById('id_'+sectionName).value;
      var form = document.createElement("form");
      form.id = `form_${formCount}`;
      form.innerHTML = `
    <label>${labelText}</label>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Shelf:</th>
                    <th scope="col">Tray:</th>
                    <th scope="col">Section:</th>
                    <th scope="col">Moisture</th>
                    <th scope="col">Week</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                <tr>            
                    <td><input type="text" id="W_Shelf" class="form-control" name="W_Shelf" value="${shelfValue}" required></td>
                    <td><input type="text" id="W_Tray" class="form-control" name="W_Tray" value="${trayValue}" required></td>
                    <td><input type="text" id="W_Section" class="form-control" name="W_Section" value="${sectionValue}" required></td>
                    <td><input type="text" id="Moisture" class="form-control" name="Moisture" required></td>
                    <td><input type="text" id="Week" class="form-control" name="Week" required></td>

                    <td><button type="button" onclick="Pending_W_submitForm('${tableId}', '${mainFormId}', ${formCount})">✔</button></td>
                    <td><button type="button" onclick="Pending_removeForm('form_${formCount}')">Close</button></td>
                </tr>
            </tbody>
        </table>
        <div style="display: none;">
<input type="text" id="entry" name="entry"  value="${entry}" required>
            <input type="text" id="floor" name="floor" value="${tableId}" required>
            <input type="text" id="station" name="station" value="${station}" required>
            <input type="text" id="labelText" name="labelText" value="${labelText}">
        </div>
    `;
      var tbody = clickedRow.parentNode;
      var index = Math.min(clickedRow.rowIndex + 1, tbody.rows.length);
      var newRow = tbody.insertRow(index);
      var newCell = newRow.insertCell(0);
      newCell.appendChild(form);
    }

    function shelf_moistureForm(
      tableId,
      mainFormId,
      clickedRow,
      shelfValue,
      trayValue,
      sectionValue,
      labelText
    ) {
      formCount++;
      var form = document.createElement("form");

      form.id = `form_${formCount}`;
      form.innerHTML = `
    <label>${labelText}</label>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Shelf:</th>
                    <th scope="col">Tray:</th>
                    <th scope="col">Section:</th>
                    <th scope="col">Moisture</th>
                    <th scope="col">Week</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input type="text" id="M_Shelf" class="form-control" name="M_Shelf" value="${shelfValue}" required></td>
                    <td><input type="text" id="M_Tray" class="form-control" name="M_Tray" value="${trayValue}" required></td>
                    <td><input type="text" id="M_Section" class="form-control" name="M_Section" value="${sectionValue}" required></td>
                    <td><input type="text" id="Moisture" class="form-control" name="Moisture" required></td>
                    <td><input type="text" id="Week" class="form-control" name="Week" required></td>

                    <td><button type="button" onclick="Pending_M_submitForm('${tableId}', '${mainFormId}', ${formCount})">✔</button></td>
                    <td><button type="button" onclick="Pending_removeForm('form_${formCount}')">Close</button></td>
                    <td><button type="button" class="add-row" onclick="weeklyForm('${tableId}', 'myForm', this.parentNode.parentNode, '${shelfValue}', '${trayValue}', '${sectionValue}', '${labelText}')">[+]</button></td>

</tr>

<tr>

  <td> <div id="formsContainer">    </div></td>


</tr>

        </tbody>
        </table>
        <div style="display: none;">
            <input type="number" id="entry" name="entry" required>
            <input type="text" id="floor" name="floor" required>
            <input type="hidden" id="station" name="station" required>
            <input type="hidden" id="labelText" name="labelText" value="${labelText}">
            
        </div>
    `;
      var moistureViewDiv = document.getElementById("MoistureView");
      moistureViewDiv.appendChild(form);
    }

    function Pending_moistureForm(
      tableId,
      mainFormId,
      clickedRow,
      shelfName,
      trayName,
      sectionName,
      labelText
    ) {
      formCount++;
      var shelfValue = document.getElementById("id_" + shelfName).value;
      var trayValue = document.getElementById("id_" + trayName).value;
      var sectionValue = document.getElementById("id_" + sectionName).value;
      var form = document.createElement("form");
      form.id = `form_${formCount}`;
      form.innerHTML = `
    <label>${labelText}</label>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Shelf:</th>
                    <th scope="col">Tray:</th>
                    <th scope="col">Section:</th>
                    <th scope="col">Moisture</th>
                    <th scope="col">Week</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input type="text" id="M_Shelf" class="form-control" name="M_Shelf" value="${shelfValue}" required></td>
                    <td><input type="text" id="M_Tray" class="form-control" name="M_Tray" value="${trayValue}" required></td>
                    <td><input type="text" id="M_Section" class="form-control" name="M_Section" value="${sectionValue}" required></td>
                    <td><input type="text" id="Moisture" class="form-control" name="Moisture" required></td>
                    <td><input type="text" id="Week" class="form-control" name="Week" required></td>

                    <td><button type="button" onclick="Pending_M_submitForm('${tableId}', '${mainFormId}', ${formCount})">✔</button></td>
                    <td><button type="button" onclick="Pending_removeForm('form_${formCount}')">Close</button></td>
                    <td><button type="button" class="add-row" onclick="weeklyForm('${tableId}', 'myForm', this.parentNode.parentNode, '${shelfValue}', '${trayValue}', '${sectionValue}', '${labelText}')">[+]</button></td>

</tr>

<tr>

  <td> <div id="formsContainer">    </div></td>


</tr>

        </tbody>
        </table>
        <div style="display: none;">
            <input type="number" id="entry" name="entry" required>
            <input type="text" id="floor" name="floor" required>
            <input type="hidden" id="station" name="station" required>
            <input type="hidden" id="labelText" name="labelText" value="${labelText}">
            
        </div>
    `;
      var moistureViewDiv = document.getElementById("MoistureView");
      moistureViewDiv.appendChild(form);
    }

    function Pending_removeForm(formId) {
      var form = document.getElementById(formId);
      if (form) {
        form.parentNode.parentNode.remove();
      } else {
        console.error(`Form with ID "${formId}" not found`);
      }
    }

    function Pending_submitForm(tableId, mainFormId, formNumber) {
      var formId = `form_${formNumber}`;
      var form = document.getElementById(formId);

      if (form) {
        var formData = new FormData(form);

        var entryCheckValue = formData.get("entryCheck");

        // Set entryValue to entryCheckValue
        var entryValue = entryCheckValue;

        var request = indexedDB.open("GCNA", 2);

        request.onsuccess = function (event) {
          var db = event.target.result;
          var transaction = db.transaction("In-House-Drying", "readwrite");
          var objectStore = transaction.objectStore("In-House-Drying");

          var obj = {};
          for (var pair of formData.entries()) {
            obj[pair[0]] = pair[1];
          }

          // Get the highest id in the object store
          var highestIdRequest = objectStore.openCursor(null, "prev");
          highestIdRequest.onsuccess = function (event) {
            var cursor = event.target.result;
            if (cursor) {
              obj.id = cursor.key + 1;
            } else {
              obj.id = 1; // This is the first item
            }

            // Exclude csrfmiddlewaretoken from being saved to IndexedDB
            formData.delete("csrfmiddlewaretoken");

            // 1. Set entry to be equal to the ID of the form

            // 2. Set station to match the station determined earlier in the code
            var stationValue = $("#id_STATION").val(); // Assuming id_STATION is the ID of the station field
            var entryValue = $("#id_entryCheck").val(); // Assuming id_STATION is the ID of the station field
            var floorValue = tableId;
            if (floorValue) {
              // Keep the entire tableId as the floor value
              obj.floor = floorValue;
            } else {
              console.error("Table ID not found");
            }

            // If the floor value is based on the table ID, extract it from the ID
            if (floorValue) {
              floorValue = floorValue.split("_").pop(); // Extract the floor value from the table ID
            } else {
              console.error("Table ID not found");
            }
            var request = indexedDB.open("GCNA", 2);

            request.onsuccess = function (event) {
              var db = event.target.result;
              var transaction = db.transaction("Shelves", "readwrite");
              var objectStore = transaction.objectStore("Shelves");

              var obj = {};
              for (var pair of formData.entries()) {
                obj[pair[0]] = pair[1];
              }

              // Include the values of entry, station, and floor in the object
              obj.entry = entryValue;
              obj.station = stationValue;
              obj.floor = floorValue;

              // Get the highest id in the object store
              var highestIdRequest = objectStore.openCursor(null, "prev");
              highestIdRequest.onsuccess = function (event) {
                var cursor = event.target.result;
                if (cursor) {
                  obj.id = cursor.key + 1;
                } else {
                  obj.id = 1; // This is the first item
                }

                var request = objectStore.put(obj);

                request.onsuccess = function () {
                  console.log("Data added to IndexedDB");
                  Pending_transferIndexedDBData(); // Transfer data to Django after saving to IndexedDB
                };

                request.onerror = function () {
                  console.error("Error adding data to IndexedDB");
                };
              };
            };

            request.onerror = function (event) {
              console.error("Error opening IndexedDB", event);
            };
          };
        };

        request.onerror = function (event) {
          console.error("Error opening IndexedDB", event);
        };
      } else {
        console.error(`Form with ID "${formId}" not found`);
      }
    }

    function Pending_M_submitForm(tableId, mainFormId, formNumber) {
      var formId = `form_${formNumber}`;
      var form = document.getElementById(formId);

      if (form) {
        var formData = new FormData(form);

        var entryCheckValue = formData.get("entryCheck");

        // Set entryValue to entryCheckValue
        var entryValue = entryCheckValue;

        var request = indexedDB.open("GCNA", 2);

        request.onsuccess = function (event) {
          var db = event.target.result;
          var transaction = db.transaction("In-House-Drying", "readwrite");
          var objectStore = transaction.objectStore("In-House-Drying");

          var obj = {};
          for (var pair of formData.entries()) {
            obj[pair[0]] = pair[1];
          }

          // Get the highest id in the object store
          var highestIdRequest = objectStore.openCursor(null, "prev");
          highestIdRequest.onsuccess = function (event) {
            var cursor = event.target.result;
            if (cursor) {
              obj.id = cursor.key + 1;
            } else {
              obj.id = 1; // This is the first item
            }

            // Exclude csrfmiddlewaretoken from being saved to IndexedDB
            formData.delete("csrfmiddlewaretoken");

            // 1. Set entry to be equal to the ID of the form

            // 2. Set station to match the station determined earlier in the code
            var stationValue = $("#id_STATION").val(); // Assuming id_STATION is the ID of the station field
            var floorValue = tableId;
            if (floorValue) {
              // Keep the entire tableId as the floor value
              obj.floor = floorValue;
            } else {
              console.error("Table ID not found");
            }

            // If the floor value is based on the table ID, extract it from the ID
            if (floorValue) {
              floorValue = floorValue.split("_").pop(); // Extract the floor value from the table ID
            } else {
              console.error("Table ID not found");
            }
            var request = indexedDB.open("GCNA", 2);

            request.onsuccess = function (event) {
              var db = event.target.result;
              var transaction = db.transaction("M_Shelves", "readwrite");
              var objectStore = transaction.objectStore("M_Shelves");

              var obj = {};
              for (var pair of formData.entries()) {
                obj[pair[0]] = pair[1];
              }

              // Include the values of entry, station, and floor in the object
              obj.station = stationValue;
              obj.floor = floorValue;

              // Get the highest id in the object store
              var highestIdRequest = objectStore.openCursor(null, "prev");
              highestIdRequest.onsuccess = function (event) {
                var cursor = event.target.result;
                if (cursor) {
                  obj.id = cursor.key + 1;
                } else {
                  obj.id = 1; // This is the first item
                }

                var request = objectStore.put(obj);

                request.onsuccess = function () {
                  console.log("Data added to IndexedDB");
                  Pending_transferIndexedDBData(); // Transfer data to Django after saving to IndexedDB
                };

                request.onerror = function () {
                  console.error("Error adding data to IndexedDB");
                };
              };
            };

            request.onerror = function (event) {
              console.error("Error opening IndexedDB", event);
            };
          };
        };

        request.onerror = function (event) {
          console.error("Error opening IndexedDB", event);
        };
      } else {
        console.error(`Form with ID "${formId}" not found`);
      }
    }

    function Pending_W_submitForm(tableId, mainFormId, formNumber) {
      var formId = `form_${formNumber}`;
      var form = document.getElementById(formId);

      if (form) {
        var formData = new FormData(form);

        var entryCheckValue = formData.get("entryCheck");

        // Set entryValue to entryCheckValue
        var entryValue = entryCheckValue;

        var request = indexedDB.open("GCNA", 2);

        request.onsuccess = function (event) {
          var db = event.target.result;
          var transaction = db.transaction("In-House-Drying", "readwrite");
          var objectStore = transaction.objectStore("In-House-Drying");

          var obj = {};
          for (var pair of formData.entries()) {
            obj[pair[0]] = pair[1];
          }

          // Get the highest id in the object store
          var highestIdRequest = objectStore.openCursor(null, "prev");
          highestIdRequest.onsuccess = function (event) {
            var cursor = event.target.result;
            if (cursor) {
              obj.id = cursor.key + 1;
            } else {
              obj.id = 1; // This is the first item
            }

            // Exclude csrfmiddlewaretoken from being saved to IndexedDB
            formData.delete("csrfmiddlewaretoken");

            // 1. Set entry to be equal to the ID of the form

            // 2. Set station to match the station determined earlier in the code
            var stationValue = $("#id_STATION").val(); // Assuming id_STATION is the ID of the station field
            var entryValue = $("#id_entryCheck").val(); // Assuming id_STATION is the ID of the station field
            var floorValue = tableId;
            if (floorValue) {
              // Keep the entire tableId as the floor value
              obj.floor = floorValue;
            } else {
              console.error("Table ID not found");
            }

            // If the floor value is based on the table ID, extract it from the ID
            if (floorValue) {
              floorValue = floorValue.split("_").pop(); // Extract the floor value from the table ID
            } else {
              console.error("Table ID not found");
            }
            var request = indexedDB.open("GCNA", 2);

            request.onsuccess = function (event) {
              var db = event.target.result;
              var transaction = db.transaction("W_Shelves", "readwrite");
              var objectStore = transaction.objectStore("W_Shelves");

              var obj = {};
              for (var pair of formData.entries()) {
                obj[pair[0]] = pair[1];
              }

              // Include the values of entry, station, and floor in the object

              // Get the highest id in the object store
              var highestIdRequest = objectStore.openCursor(null, "prev");
              highestIdRequest.onsuccess = function (event) {
                var cursor = event.target.result;
                if (cursor) {
                  obj.id = cursor.key + 1;
                } else {
                  obj.id = 1; // This is the first item
                }

                var request = objectStore.put(obj);

                request.onsuccess = function () {
                  console.log("Data added to IndexedDB");
                  Pending_transferIndexedDBData(); // Transfer data to Django after saving to IndexedDB
                };

                request.onerror = function () {
                  console.error("Error adding data to IndexedDB");
                };
              };
            };

            request.onerror = function (event) {
              console.error("Error opening IndexedDB", event);
            };
          };
        };

        request.onerror = function (event) {
          console.error("Error opening IndexedDB", event);
        };
      } else {
        console.error(`Form with ID "${formId}" not found`);
      }
    }

    function Pending_transferIndexedDBData() {
      var request = indexedDB.open("GCNA", 2);

      request.onsuccess = function (event) {
        var db = event.target.result;
        var transaction = db.transaction("Shelves", "readonly");
        var objectStore = transaction.objectStore("Shelves");
        var getRequest = objectStore.getAll();

        getRequest.onsuccess = function (event) {
          var data = event.target.result;
          data.forEach(function (item) {
            Pending_sendDataToDjango(item);
          });
        };
      };

      request.onerror = function (event) {
        console.error("Error opening IndexedDB", event);
      };
    }

    function Pending_sendDataToDjango(item) {
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "/check-and-add/", true);
      xhr.setRequestHeader("Content-Type", "application/json");
      xhr.onreadystatechange = function () {
        if (xhr.readyState === XMLHttpRequest.DONE) {
          if (xhr.status === 200) {
            console.log("Entry added successfully.");
          } else {
            console.error("Error adding entry:", xhr.statusText);
          }
        }
      };
      xhr.send(JSON.stringify(item));
    }
  </script>

  {% endblock %}
</body>
